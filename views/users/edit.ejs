<%- include('../partials/top', { title: 'Editar Usuário' }) %>

<header>
  <h1>Editar Usuário</h1>
</header>

<div class="card">
  <% if (error) { %>
    <div style="background: #fee; color: #c33; padding: 16px; border-radius: 8px; margin-bottom: 24px; border-left: 4px solid #c33;">
      <%= error %>
    </div>
  <% } %>

  <form method="POST" action="/users/<%= user.id %>">
    <div class="field">
      <label for="username">Nome de Usuário</label>
      <input type="text" id="username" value="<%= user.username %>" disabled style="background: var(--gray-100); cursor: not-allowed;">
      <small>Nome de usuário não pode ser alterado</small>
    </div>

    <div class="field">
      <label for="fullName">Nome Completo <span style="color: #dc2626;">*</span></label>
      <input type="text" id="fullName" name="fullName" value="<%= user.full_name %>" required>
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" value="<%= user.email || '' %>" placeholder="exemplo@email.com">
    </div>

    <div class="field">
      <label for="role">Função <span style="color: #dc2626;">*</span></label>
      <select id="role" name="role" required>
        <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>Usuário</option>
        <option value="admin" <%= user.role === 'admin' ? 'selected' : '' %>>Administrador</option>
      </select>
    </div>

    <div class="field">
      <label for="active">Status <span style="color: #dc2626;">*</span></label>
      <select id="active" name="active" required>
        <option value="true" <%= user.active ? 'selected' : '' %>>Ativo</option>
        <option value="false" <%= !user.active ? 'selected' : '' %>>Inativo</option>
      </select>
    </div>

    <div class="actions">
      <button type="submit" class="btn primary">Salvar Alterações</button>
      <a href="/users" class="btn secondary">Cancelar</a>
    </div>
  </form>
</div>

<%- include('../partials/bottom') %>
